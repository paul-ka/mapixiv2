<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="apple-mobile-web-app-capable" content="yes" />

<link rel="apple-touch-startup-image" href="images/splash.png" />

<link href="images/icone-57.png" rel="apple-touch-icon-precomposed" />
<link href="images/icone-72.png" sizes="72x72" rel="apple-touch-icon-precomposed" />
<link href="images/icone-114.png" sizes="114x114" rel="apple-touch-icon-precomposed" />

<link rel="shortcut icon" href="images/icone.ico" type="image/x-icon" />

<meta name="viewport" content="width=device-width, minimum-scale=1.0, user-scalable=no, maximun-scale=0.6667" />
<link href="css/styles.css" rel="stylesheet" type="text/css"  />

<link href="css/styles320.css" rel="stylesheet" type="text/css" media="screen and (-webkit-device-pixel-ratio:1) and (max-device-width:320px)" />

<link href="css/styles.css" rel="stylesheet" type="text/css" media="screen and (-webkit-device-pixel-ratio:2)" />
<style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0px; padding: 0px }
    #map_canvas { height: 100% ; width:100%;}
  </style>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
  <script type="text/javascript">
 
    var previousPosition = null;
   
    function initialize() {
      map = new google.maps.Map(document.getElementById("map_canvas"), {
            zoom: 19,
            center: new google.maps.LatLng(48.858565, 2.347198),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          });   
    }
       
    if (navigator.geolocation)
      var watchId = navigator.geolocation.watchPosition(successCallback, null, {enableHighAccuracy:true});
    else
      alert("Votre navigateur ne prend pas en compte la g√©olocalisation HTML5");
       
    function successCallback(position){
      map.panTo(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(position.coords.latitude, position.coords.longitude), 
        map: map
      });  
      if (previousPosition){
        var newLineCoordinates = [
           new google.maps.LatLng(previousPosition.coords.latitude, previousPosition.coords.longitude),
           new google.maps.LatLng(position.coords.latitude, position.coords.longitude)];
         
        var newLine = new google.maps.Polyline({
          path: newLineCoordinates,        
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2
        });
        newLine.setMap(map);
      }
      previousPosition = position;
    };    
  </script>
</head>
 
<body onload="initialize()">
  <div id="map_canvas"></div>
</body>
</html>